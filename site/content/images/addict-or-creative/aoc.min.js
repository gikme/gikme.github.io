!function(){function f(a){for(var b=a.length,c=0,d=0;0!==b;)d=Math.floor(Math.random()*b),b-=1,c=a[b],a[b]=a[d],a[d]=c;return a}var a=function(a){var b=document.querySelector("#addict-or-creative");if(null===b)throw new Error("Host not found");this.host=b,this.staticPathPrefix=a,this.init()};a.prototype.states={PENDING:0,PLAYING:1,FINISHED:2},a.prototype.steps=[],a.prototype.currentState=null,a.prototype.scores=0,a.prototype.step=0,a.prototype.host=null,a.prototype.image=null,a.prototype.imageBuffer=new Image,a.prototype.init=function(){var a=this,c=document.createElement("link");c.rel="stylesheet",c.href=a.staticPathPrefix+"aoc.min.css",document.head.appendChild(c);var d=document.createElement("script");d.src="http://yastatic.net/share/share.js",document.head.appendChild(d),a.currentState=this.states.PENDING,a.host.innerHTML=b,a.host.addEventListener("click",function(b){var c=b.target.getAttribute("data-action");switch(c){case"js-aoc--start":a.startGame();break;case"js-aoc--addict":a.turn(!0);break;case"js-aoc--creative":a.turn(!1)}})},a.prototype.startGame=function(){var a=this;a.steps=f(e).slice(10),a.step=0,a.scores=0,a.currentState=a.states.PLAYING,a.host.innerHTML=c,a.image=a.host.querySelector("#js-aoc--image"),a.counter=a.host.querySelector("#aoc--js-counter"),a.updateImage(),a.updateCounter()},a.prototype.turn=function(a){var b=this;b.steps[b.step].isAddict===a&&(b.scores+=10),b.step+=1,b.step>9?b.endGame():(b.updateImage(),b.updateCounter())},a.prototype.endGame=function(){var a=this;a.host.innerHTML=d;var b=a.host.querySelector(".js-aoc--scores-amount");b.innerHTML=a.scores,new Ya.share({element:"aoc--js-share",image:a.staticPathPrefix+"logo.png",title:"\u0418\u0433\u0440\u0430 \u041d\u043e\u0440\u043a\u043e\u043c\u0430\u043d \u0438\u043b\u0438 \u0442\u0432\u043e\u0440\u0435\u0446",description:"\u042f \u043d\u0430\u0431\u0440\u0430\u043b "+a.scores+" \u043e\u0447\u043a\u043e\u0432 \u0432 \u0438\u0433\u0440\u0435 \u041d\u043e\u0440\u043a\u043e\u043c\u0430\u043d \u0438\u043b\u0438 \u0442\u0432\u043e\u0440\u0435\u0446",serviceSpecific:{twitter:{title:"\u042f \u043d\u0430\u0431\u0440\u0430\u043b "+a.scores+" \u043e\u0447\u043a\u043e\u0432 \u0432 \u0438\u0433\u0440\u0435 \u041d\u043e\u0440\u043a\u043e\u043c\u0430\u043d \u0438\u043b\u0438 \u0442\u0432\u043e\u0440\u0435\u0446"}},elementStyle:{type:"none",quickServices:["","vkontakte","twitter","facebook","gplus"]}})},a.prototype.updateImage=function(){var a=this;a.image.src=a.staticPathPrefix+a.steps[a.step].src},a.prototype.updateCounter=function(){var a=this;a.counter.innerHTML=a.step+1+"/10"};var b='<div class="aoc--screen aoc--start"><button class="aoc--button aoc-button_start" data-action="js-aoc--start">\u0418\u0433\u0440\u0430\u0442\u044c</button></div>',c='<div class="aoc--screen aoc--battle-field"><h1 class="aoc--battle-field__header">\u041d\u043e\u0440\u043a\u043e\u043c\u0430\u043d \u0438\u043b\u0438 \u0442\u0432\u043e\u0440\u0435\u0446?</h1><div class="aoc--battle-field__counter" id="aoc--js-counter"></div><img class="aoc--battle-field__image" id="js-aoc--image"><div class="aoc--battle-field__actions"><button class="aoc--button aoc--button_addict" data-action="js-aoc--addict">\u041d\u043e\u0440\u043a\u043e\u043c\u0430\u043d</button><button class="aoc--button aoc--button_creative" data-action="js-aoc--creative">\u0422\u0432\u043e\u0440\u0435\u0446</button></div></div>',d='<div class="aoc--screen aoc--end"><h1 class="aoc--hightscores">\u0412\u044b \u043d\u0430\u0431\u0440\u0430\u043b\u0438 <span class="js-aoc--scores-amount"></span> \u043e\u0447\u043a\u043e\u0432</h1><button class="aoc--button aoc-button_start" data-action="js-aoc--start">\u0415\u0449\u0435 \u0440\u0430\u0437!</button><div id="aoc--js-share"></div></div>',e=[{src:"img/1.jpg",isAddict:!0},{src:"img/2.jpg",isAddict:!0},{src:"img/3.jpg",isAddict:!0},{src:"img/4.jpg",isAddict:!0},{src:"img/5.jpg",isAddict:!0},{src:"img/6.jpg",isAddict:!0},{src:"img/7.jpg",isAddict:!0},{src:"img/8.jpg",isAddict:!0},{src:"img/9.jpg",isAddict:!0},{src:"img/10.jpg",isAddict:!0},{src:"img/11.jpg",isAddict:!1},{src:"img/12.jpg",isAddict:!1},{src:"img/13.jpg",isAddict:!1},{src:"img/14.jpg",isAddict:!1},{src:"img/15.jpg",isAddict:!1},{src:"img/16.jpg",isAddict:!1},{src:"img/17.jpg",isAddict:!1},{src:"img/18.jpg",isAddict:!1},{src:"img/19.jpg",isAddict:!1},{src:"img/20.jpg",isAddict:!1}];new a("/images/addict-or-creative/")}();